daemonize yes
pidfile /var/run/redis/redis-server.pid
logfile /var/log/redis/redis-server.log

port <%= node['redis-server']['port'] %>
bind <%= node['redis-server']['bind'] %>
timeout 300

loglevel <%= node['redis-server']['loglevel'] %>

databases <%= node['redis-server']['databases'] %>

<% node['redis-server']['save'].each do |save_entry| %>
  <%= "save #{save_entry}" %>
<% end %>

rdbcompression <%= node['redis-server']['rdbcompression'] %>
dbfilename <%= node['redis-server']['dbfilename'] %>

dir <%= node['redis-server']['dir'] %>
appendonly <%= node['redis-server']['appendonly'] %>

<% node['redis-server']['additional_configuration_values'].each do |key, value| %>
  <%= "#{key} #{value}" %>
<% end %>
